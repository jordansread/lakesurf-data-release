
target_default: 3_ncdf

packages:
  - tidyverse
  - scipiper
  - ncdf4
  - sf

sources:
  - src/ncdf_utils.R

targets:
  3_ncdf:
    depends:
      - out_data/weather_data_filehashes.yaml

  # to do:
  # - update this so cell_index is a continuous variable that runs throughout all groups and is included in the metadata
  # - truncate time to export time range (1980-2020)
  # - clean up metadata with Blodgett advice
  # - create a joined table with variable information (e.g., units and long_name)

  out_data/weather_data_filehashes.yaml:
    command: build_driver_nc(target_name, 'in_data/NLDAS_nc_dailies.yaml', cell_id_groups)

  out_data/prediction_data_filehashes.yml:
    command: build_prediction_nc(target_name, I('/Volumes/ThunderBlade/SWT_results'), site_id_groups)
