
target_default: 4_viz

packages:
  - tidyverse
  - scipiper
  - sf
  - viridis

sources:
  - src/viz_utils.R

targets:
  4_viz:
    depends:
      - out_viz/time_season_accuracy.png
      - out_viz/accuracy_panel.png
      - out_viz/data_coverage_panel.png
      - out_viz/EA-LSTM_time_value_accuracy_bias.png
      - out_viz/ERA5_time_value_accuracy_bias.png
      - out_viz/LM_time_value_accuracy_bias.png

  out_viz/time_season_accuracy.png:
    command: plot_time_season_accuracy(target_name, 'out_data/lake_surface_temp_preds.csv')

  out_viz/accuracy_panel.png:
    command: plot_space_raw_panel(target_name, 'out_data/lake_metadata.csv',
      preds_obs_fl = 'out_data/lake_surface_temp_preds.csv',
      accuracy_cellsize = 0.5,
      space_cellsize = 1,
      model_ids = I(c(I('wtemp_EALSTM'), I('wtemp_ERA5'), I('wtemp_LM'))))

  out_viz/data_coverage_panel.png:
    command: plot_coverage_panel(target_name,
      centroids_sf = modeled_centroids_sf,
      metadata_fl = 'out_data/lake_metadata.csv',
      preds_obs_fl = 'out_data/lake_surface_temp_preds.csv',
      cellsize = 1)

  out_viz/EA-LSTM_year_bias.png:
    command: plot_year_bias(target_name,
      preds_obs_fl = 'out_data/lake_surface_temp_preds.csv',
      model_id = I(c(I('wtemp_EALSTM'))))

  out_viz/ERA5_year_bias.png:
    command: plot_year_bias(target_name,
      preds_obs_fl = 'out_data/lake_surface_temp_preds.csv',
      model_id = I(c(I('wtemp_ERA5'))))

  out_viz/LM_year_bias.png:
    command: plot_year_bias(target_name,
      preds_obs_fl = 'out_data/lake_surface_temp_preds.csv',
      model_id = I(c(I('wtemp_LM'))))

  out_viz/LM_doy_bias.png:
    command: plot_doy_bias(target_name,
      preds_obs_fl = 'out_data/lake_surface_temp_preds.csv',
      model_id = I(c(I('wtemp_LM'))))

  out_viz/ERA5_doy_bias.png:
    command: plot_doy_bias(target_name,
      preds_obs_fl = 'out_data/lake_surface_temp_preds.csv',
      model_id = I(c(I('wtemp_ERA5'))))

  out_viz/EA-LSTM_doy_bias.png:
    command: plot_doy_bias(target_name,
      preds_obs_fl = 'out_data/lake_surface_temp_preds.csv',
      model_id = I(c(I('wtemp_EALSTM'))))

  out_viz/EA-LSTM_tempbin_bias.png:
    command: plot_tempbin_bias(target_name,
      preds_obs_fl = 'out_data/lake_surface_temp_preds.csv',
      model_id = I(c(I('wtemp_EALSTM'))))

  out_viz/LM_tempbin_bias.png:
    command: plot_tempbin_bias(target_name,
      preds_obs_fl = 'out_data/lake_surface_temp_preds.csv',
      model_id = I(c(I('wtemp_LM'))))

  out_viz/ERA5_tempbin_bias.png:
    command: plot_tempbin_bias(target_name,
      preds_obs_fl = 'out_data/lake_surface_temp_preds.csv',
      model_id = I(c(I('wtemp_ERA5'))))
